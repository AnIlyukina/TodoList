(function(t){function e(e){for(var i,c,r=e[0],a=e[1],u=e[2],l=0,d=[];l<r.length;l++)c=r[l],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&d.push(s[c][0]),s[c]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);p&&p(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var a=n[r];0!==s[a]&&(i=!1)}i&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var i={},s={app:0},o=[];function c(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=i,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],a=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var p=a;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},4383:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("Header"),t.popupVisible?n("PopupConfirm"):t._e(),t.loading?n("Loader"):t._e(),n("router-view")],1)},o=[],c=n("5530"),r=n("2f62"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("img",{staticClass:"header__logo",attrs:{src:n("f325")}}),i("h1",[t._v("Заметки")]),i("div",{staticClass:"header__button"},[t.isBackIcon?t._e():i("div",{staticClass:"add",on:{click:t.onAddClick}})])])},u=[],p={name:"Header",computed:Object(c["a"])({},Object(r["c"])(["isBackIcon","items"])),methods:Object(c["a"])(Object(c["a"])({},Object(r["b"])(["setIsBackIcon","setPopupType","setPopupVisible"])),{},{onAddClick:function(){this.$router.push("/create")}})},l=p,d=(n("8baf"),n("2877")),m=Object(d["a"])(l,a,u,!1,null,null,null),f=m.exports,b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader"},[n("div",{staticClass:"loader__back"}),n("div",{staticClass:"loader__icon"})])}],v={name:"Loader"},_=v,k=(n("74ae"),Object(d["a"])(_,b,h,!1,null,null,null)),g=k.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup"},[n("div",{staticClass:"popup__form",attrs:{name:"form"}},[n("button",{staticClass:"popup__close",attrs:{type:"button"},on:{click:t.closePopup}}),n("h2",{staticClass:"popup__form-title"},[t._v(t._s(t.popupType.title))]),n("div",{staticClass:"popup__buttons"},[n("button",{staticClass:"popup__button",attrs:{type:"submit"},on:{click:t.onConfirmClick}},[t._v(" Да ")]),n("button",{staticClass:"popup__button",attrs:{type:"submit"},on:{click:t.onCancelClick}},[t._v(" Нет ")])])])])},y=[],x={name:"PopupConfirm",computed:Object(c["a"])({},Object(r["c"])(["popupType"])),methods:Object(c["a"])(Object(c["a"])({},Object(r["b"])(["setPopupVisible","setPopupType"])),{},{closePopup:function(){this.setPopupVisible(!1)},onCancelClick:function(){this.popupType.popupFunctionCancel&&this.popupType.popupFunctionCancel(),this.setPopupVisible(!1)},onConfirmClick:function(){this.popupType.popupFunction(),this.setPopupVisible(!1)}})},O=x,j=(n("ec8b"),Object(d["a"])(O,C,y,!1,null,null,null)),I=j.exports,w={name:"App",components:{Header:f,PopupConfirm:I,Loader:g},computed:Object(c["a"])({},Object(r["c"])(["popupVisible","items","loading"])),methods:Object(c["a"])({},Object(r["b"])(["setIsBackIcon"])),watch:{$route:function(t){"/"===t.path&&this.setIsBackIcon(!1)}}},P=w,T=(n("034f"),Object(d["a"])(P,s,o,!1,null,null,null)),$=T.exports;n("a434");i["a"].use(r["a"]);var V=new r["a"].Store({state:{popupVisible:!1,isBackIcon:!1,popupType:{},items:[],loading:!1},mutations:{deleteItem:function(t,e){t.items.splice(e,1)},setPopupVisible:function(t,e){t.popupVisible=e},deleteTaks:function(t,e){t.items[e.itemId].tasks.splice(e.taskId,1)},setIsBackIcon:function(t,e){t.isBackIcon=e},setPopupType:function(t,e){t.popupType=e},setItems:function(t,e){t.items=e},setLoading:function(t,e){t.loading=e}},actions:{deleteItem:function(t,e){t.commit("deleteItem",e)},setPopupVisible:function(t,e){return[t.commit("setPopupVisible",e)]},deleteTask:function(t,e){t.commit("deleteTask",e)},setIsBackIcon:function(t,e){t.commit("setIsBackIcon",e)},setPopupType:function(t,e){t.commit("setPopupType",e)},setItems:function(t,e){t.commit("setItems",e)},setLoading:function(t,e){t.commit("setLoading",e)}}}),B=n("8c4f"),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todolist"},[n("div",{staticClass:"items"},t._l(t.items,(function(t,e){return n("Item",{key:e,attrs:{index:e,item:t}})})),1)])},R=[],S=n("1da1"),E=(n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item"},[n("div",{staticClass:"item__title"},[t._v(t._s(t.item.title))]),n("div",{staticClass:"item__block"},[n("div",{staticClass:"item__tasks"},t._l(t.item.tasks.slice(0,3),(function(e,i){return n("div",{key:i,staticClass:"item__task"},[n("div",{class:["task__title",e.completed&&"completed"]},[t._v(t._s(e.title))])])})),0),n("div",{staticClass:"item__controls"},[n("div",{staticClass:"edit item__control",on:{click:t.onEditClick}}),n("div",{staticClass:"delete item__control",on:{click:t.onDeleteClick}})])])])}),q=[],A=(n("a9e3"),n("d1fd")),F=n.n(A),N=n("b4a7"),D=n.n(N),H=(n("d3b7"),n("e9c4"),"https://todobacks.azurewebsites.net/api/Todo/"),J=function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e(!0),t.prev=1,t.next=4,fetch("".concat(H,"GetTodos"));case 4:return n=t.sent,t.next=7,n.json();case 7:return i=t.sent,t.abrupt("return",i);case 11:return t.prev=11,t.t0=t["catch"](1),console.log(t.t0),t.abrupt("return",null);case 15:return t.prev=15,e(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,11,15,18]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n(!0),t.prev=1,console.log(e),t.next=5,fetch("".concat(H,"CreateTodo"),{headers:{"Content-Type":"application/json"},body:JSON.stringify(e),method:"POST"});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0);case 10:return t.prev=10,n(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),z=function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n(!0),t.prev=1,t.next=4,fetch("".concat(H,"DeleteTodo?id=").concat(e));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:return t.prev=9,n(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,6,9,12]])})));return function(e,n){return t.apply(this,arguments)}}(),U=function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n(!0),t.prev=1,t.next=4,fetch("".concat(H,"UpdateTodo"),{headers:{"Content-Type":"application/json"},body:JSON.stringify(e),method:"PUT"});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:return t.prev=9,n(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,6,9,12]])})));return function(e,n){return t.apply(this,arguments)}}(),G={name:"Item",props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},methods:Object(c["a"])(Object(c["a"])({},Object(r["b"])(["deleteItem","setPopupVisible","setPopupType","setLoading"])),{},{onDeleteClick:function(){this.setPopupType({title:"Удалить заметку?",popupFunction:this.delete}),this.setPopupVisible(!0)},delete:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(t.item.id,t.setLoading);case 2:t.deleteItem(t.index);case 3:case"end":return e.stop()}}),e)})))()},onEditClick:function(){this.$router.push("/edit/".concat(this.index))}}),data:function(){return{Complete:F.a,NotComplete:D.a}}},K=G,Q=(n("9894"),Object(d["a"])(K,E,q,!1,null,null,null)),W=Q.exports,X={name:"TodoList",components:{Item:W},computed:Object(c["a"])({},Object(r["c"])(["items"])),methods:Object(c["a"])({},Object(r["b"])(["setItems","setLoading","setIsBackIcon"])),mounted:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.setIsBackIcon(!1),e.t0=t,e.next=4,J(t.setLoading);case 4:e.t1=e.sent,e.t0.setItems.call(e.t0,e.t1);case 6:case"end":return e.stop()}}),e)})))()}},Y=X,Z=(n("ed30"),Object(d["a"])(Y,L,R,!1,null,null,null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"create"},[t.isBackIcon?n("div",{staticClass:"back",on:{click:t.onBackClick}}):t._e(),n("h2",{staticClass:"create__title"},[t._v(t._s(this.$route.params.id?"Изменить заметку":"Новая заметка:"))]),n("div",{staticClass:"create__form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.item.title,expression:"item.title"}],staticClass:"create__input create__input_type_title",attrs:{name:"todoName",placeholder:"Название"},domProps:{value:t.item.title},on:{input:function(e){e.target.composing||t.$set(t.item,"title",e.target.value)}}}),t._l(t.item.tasks,(function(e,i){return n("div",{key:i,staticClass:"create__tasks"},[n("button",{class:["create__button",e.completed&&"completed"],on:{click:function(){return t.onCompleted(i)}}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.tasks[i].title,expression:"item.tasks[index].title"}],ref:"inputTask",refInFor:!0,staticClass:"create__input create__input_type_task",attrs:{placeholder:"Задача"},domProps:{value:t.item.tasks[i].title},on:{input:[function(e){e.target.composing||t.$set(t.item.tasks[i],"title",e.target.value)},t.onInput]}}),t._v(" "),n("button",{class:["create__button create__button_type_delete",1===t.item.tasks.length&&"disabled"],on:{click:function(){return t.onDeleteClick(i)}}})])})),n("div",{staticClass:"create__change"},[n("button",{ref:"buttonAdd",staticClass:"create__button create__button_type_add",on:{click:t.onAddTaskClick}}),n("button",{class:["create__button-save",!t.modelValid&&"disabled"],on:{click:t.onSaveClick}},[t._v("Сохранить")])])],2)])},nt=[],it=(n("caad"),n("2532"),n("b5ae")),st={name:"Create",props:{itemId:{type:Number,required:!1}},data:function(){return{item:{title:"",tasks:[{title:"",completed:!1}]}}},validations:{item:{title:{required:it["required"]},tasks:{required:it["required"],$each:{title:{required:it["required"]}}}}},computed:Object(c["a"])(Object(c["a"])({},Object(r["c"])(["items","popupType","isBackIcon"])),{},{modelValid:function(){return!this.$v.item.$invalid&&!this.$v.item.tasks.$invalid},onEditScreen:function(){return this.$route.path.includes("/edit")}}),methods:Object(c["a"])(Object(c["a"])({},Object(r["b"])(["setPopupVisible","setIsBackIcon","setPopupType","setLoading","setItems"])),{},{onAddTaskClick:function(){this.item.tasks.push({title:"",completed:!1})},onSaveClick:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.onEditScreen){e.next=7;break}if(!t.modelValid){e.next=5;break}return e.next=4,M(t.item,t.setLoading);case 4:t.$router.push("/");case 5:e.next=11;break;case 7:if(!t.modelValid){e.next=11;break}return e.next=10,U(t.item,t.setLoading);case 10:t.$router.push("/");case 11:case"end":return e.stop()}}),e)})))()},delete:function(t){this.item.tasks.splice(t,1)},onDeleteClick:function(t){var e=this;this.item.tasks.length>1&&(this.setPopupType({title:"Удалить задачу?",popupFunction:function(){return e.delete(t)}}),this.setPopupVisible(!0))},resizeTextArea:function(t){t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px")},onInput:function(t){this.resizeTextArea(t.target)},onCompleted:function(t){this.item.tasks[t].completed=!this.item.tasks[t].completed},save:function(t){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.onEditScreen){n.next=5;break}return n.next=3,U(t,e.setLoading);case 3:n.next=7;break;case 5:return n.next=7,M(t,e.setLoading);case 7:e.$router.push("/");case 8:case"end":return n.stop()}}),n)})))()},cancel:function(){this.$router.push("/")},onBackClick:function(){var t=this;this.modelValid?(this.setPopupType({title:"Сохранить изменения?",popupFunction:function(){return t.save(t.item)},popupFunctionCancel:function(){return t.cancel()}}),this.setPopupVisible(!0)):this.$router.push("/")}}),mounted:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.setIsBackIcon(!0),!t.$route.path.includes("/edit")){e.next=8;break}return e.t0=t,e.next=5,J(t.setLoading);case 5:e.t1=e.sent,e.t0.setItems.call(e.t0,e.t1),t.item=t.items[t.$route.params.id];case 8:case"end":return e.stop()}}),e)})))()}},ot=st,ct=(n("d66e"),Object(d["a"])(ot,et,nt,!1,null,null,null)),rt=ct.exports,at=new B["a"]({mode:"history",routes:[{path:"/",component:tt},{path:"/create",component:rt},{path:"/edit/:id",component:rt}]}),ut=n("1dce"),pt=n.n(ut);i["a"].config.productionTip=!1,i["a"].use(pt.a),i["a"].use(B["a"]),new i["a"]({store:V,router:at,render:function(t){return t($)}}).$mount("#app")},6860:function(t,e,n){},"74ae":function(t,e,n){"use strict";n("b4ad")},"85ec":function(t,e,n){},"89d2":function(t,e,n){},"8baf":function(t,e,n){"use strict";n("6860")},9894:function(t,e,n){"use strict";n("d434")},b4a7:function(t,e,n){t.exports=n.p+"img/notcomplete.b62a44d7.png"},b4ad:function(t,e,n){},d077:function(t,e,n){},d1fd:function(t,e,n){t.exports=n.p+"img/complete.6bf36426.png"},d434:function(t,e,n){},d66e:function(t,e,n){"use strict";n("d077")},ec8b:function(t,e,n){"use strict";n("4383")},ed30:function(t,e,n){"use strict";n("89d2")},f325:function(t,e,n){t.exports=n.p+"img/todoList.a94c4440.png"}});
//# sourceMappingURL=app.32f4cf4b.js.map