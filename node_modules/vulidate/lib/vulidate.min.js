/*!
* Vulidate.js v0.2.0
* (c) 2019 张帅
* Released under the MIT License.
*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).vulidate=t()}(this,function(){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n,r=Object.assign({value:t},e);return"function"==typeof(n=!e.validator||e.validator(t,r)).then?n.catch(function(e){var t=function(o){for(var e=1;e<arguments.length;e++){var u=null!=arguments[e]?arguments[e]:{},t=Object.keys(u);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(u).filter(function(e){return Object.getOwnPropertyDescriptor(u,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=u[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},r,{reason:e});throw"string"==typeof e&&(t.message=e),t}):n?Promise.resolve():Promise.reject(r)}return function(t){if(!t)throw new Error("no rule provided");return"function"==typeof t&&(t={validator:t}),function(e){var n;return n="string"==typeof e?Object.assign({},t,{message:e||"valid fail"}):Object.assign({},t,e),function(e,t){e.__rules||(Object.defineProperty(e,"__rules",{enumerable:!1,configurable:!1,writable:!1,value:Object.create(null)}),Object.defineProperty(e,"$validate",{enumerable:!1,configurable:!1,writable:!1,value:function(){return function c(f,l){return Array.isArray(f)&&f.length?f.slice(1).reduce(function(e,t){return e.then(function(){return o(t,l)})},o(f[0],l)):"object"===r(f)&&null!==f?new Promise(function(e,t){var n=Object.keys(f),r=[],o=0,u=n.length;function i(){++o===u&&(r.length?t(r):e())}n.forEach(function(e){c(f[e],l[e]).then(i).catch(function(e){r.push(e),i()})})}):Promise.resolve()}(function t(n){if(n&&n.__rules){var r=Object.assign({},n.__rules);return Object.keys(n).forEach(function(e){r[e]=t(n[e])||r[e]}),r}}(e),e)}})),e.__rules[t]?e.__rules[t].push(n):e.__rules[t]=[n]}}}});